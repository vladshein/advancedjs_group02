{"version":3,"file":"index.js","sources":["../src/js/template/paginationMarkup.js","../src/js/handlers/exercise_handlers.js","../src/js/partials_js/card-category.js","../src/js/partials_js/filter.js","../src/js/partials_js/subscription.js","../src/js/partials_js/scroll-up.js","../src/main.js"],"sourcesContent":["function renderPagination(\n  paginationWrapper,\n  currentPage,\n  totalPages,\n  clickHandler\n) {\n  paginationWrapper.innerHTML = ''; // Очистити попередній вміст\n\n  const maxPrev = 2;\n  const maxNext = 2;\n\n  // Створює кнопку\n  function createPageButton(page) {\n    const btn = document.createElement('button');\n    btn.classList.add('page-number');\n    btn.textContent = page;\n    if (page === currentPage) {\n      btn.disabled = true;\n      btn.classList.add('active');\n    }\n    btn.addEventListener('click', clickHandler);\n    return btn;\n  }\n\n  // Діапазон сторінок\n  const startPage = Math.max(1, currentPage - maxPrev);\n  const endPage = Math.min(totalPages, currentPage + maxNext);\n\n  // Кнопка \"←\"\n  // if (currentPage > 1) {\n  //   const prev = document.createElement('button');\n  //   prev.textContent = '←';\n  //   prev.addEventListener('click', () => {\n  //     renderPagination(currentPage - 1, totalPages);\n  //   });\n  //   pagination.appendChild(prev);\n  // }\n\n  // Кнопки сторінок\n  for (let i = startPage; i <= endPage; i++) {\n    paginationWrapper.appendChild(createPageButton(i));\n  }\n  // Кнопка \"→\"\n  // if (currentPage < totalPages) {\n  //   const next = document.createElement('button');\n  //   next.textContent = '→';\n  //   next.addEventListener('click', () => {\n  //     renderPagination(currentPage + 1, totalPages);\n  //   });\n  //   pagination.appendChild(next);\n  // }\n}\n\nexport { renderPagination };\n","import { exerciseService } from '../services/services';\nimport { renderPagination } from '../template/paginationMarkup';\nimport { exerciseCreateMarkup } from '../template/exercisesMarkup';\nimport { showErrorToast } from '../utils/utils';\nimport { refs } from '../utils/refs';\nimport { queryParams, category, notFoundText } from '../utils/consts';\n\nasync function handlePageClick(event) {\n  const page = event.target.textContent;\n  queryParams.page = Number(page);\n  queryParams.limit = window.innerWidth >= 768 ? 10 : 8;\n\n  refs.exercisePageWrapper.innerHTML = '';\n  refs.exercises.innerHTML = '';\n\n  try {\n    refs.exercises.innerHTML = `<div class=\"loader\"></div>`;\n    const exercises = await exerciseService.getExercisesWithParams(queryParams);\n    queryParams.maxPage = exercises.totalPages; // зберігаємо номер останньої сторінки в пагінації\n    refs.exercises.innerHTML = exerciseCreateMarkup(exercises.results);\n\n    // якщо за перший запит ми отримали всі обʼєкти колекції - не показуємо пагінацію\n    if (queryParams.maxPage === 1) {\n      return;\n    }\n\n    // пагінація\n    renderPagination(\n      refs.exercisePageWrapper,\n      queryParams.page,\n      queryParams.maxPage,\n      handlePageClick\n    );\n  } catch (err) {\n    showErrorToast('Failed to load exercises. Please try again later.');\n  }\n}\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const userQuery = form.elements.query.value.trim();\n\n  // if (userQuery === '') {\n  //   showErrorToast('Please entered your request');\n  //   // return;\n  // }\n  \n  // скидання попередніх станів перед повторним запитом\n  refs.exercisePageWrapper.innerHTML = '';\n  refs.exercises.innerHTML = '';\n\n  queryParams.page = 1;\n  queryParams.limit = window.innerWidth >= 768 ? 10 : 8;\n  queryParams.keyword = userQuery;\n\n  try {\n    refs.exercises.innerHTML = `<div class=\"loader\"></div>`;\n\n    const exercises = await exerciseService.getExercisesWithParams(queryParams);\n    queryParams.maxPage = exercises.totalPages; // зберігаємо номер останньої сторінки в пагінації\n\n    if (exercises.results.length === 0) {\n      refs.exercises.innerHTML = `<p class=\"exercise-title-text\">${notFoundText}</p>`;\n      return;\n    }\n\n    refs.exercises.innerHTML = exerciseCreateMarkup(exercises.results);\n    // якщо за перший запит ми отримали всі обʼєкти колекції - не показуємо пагінацію\n    if (queryParams.maxPage === 1) {\n      return;\n    }\n\n    renderPagination(\n      refs.exercisePageWrapper,\n      queryParams.page,\n      queryParams.maxPage,\n      handlePageClick\n    );\n  } catch (err) {\n    showErrorToast('Failed to load exercises. Please try again later.');\n  } finally {\n    form.reset();\n  }\n}\n\nasync function handleCategoryClick(event) {\n  event.preventDefault();\n  if (event.target === event.currentTarget) {\n    return;\n  }\n\n  refs.exercises.innerHTML = '';\n  refs.exercisePageWrapper.innerHTML = '';\n  refs.searchForm.classList.add('active-search-form');\n  refs.cardContainer.classList.add('hidden');\n  refs.exerciseContainer.classList.remove('hidden');\n\n  queryParams.page = 1;\n  queryParams.keyword = '';\n  queryParams.limit = window.innerWidth >= 768 ? 10 : 8;\n  queryParams.category_name =\n    event.target.querySelector('.category-name').textContent;\n  queryParams.category_type =\n    category[\n      event.target\n        .querySelector('.category-type')\n        .textContent.replace(/\\s/g, '')\n    ];\n\n  refs.exercisesHeader.innerHTML = `Exercises / <span class=\"exercise-header-category\">${queryParams.category_name}</span>`;\n  queryParams.category_name = queryParams.category_name.toLowerCase();\n\n  try {\n    refs.exercises.innerHTML = `<div class=\"loader\"></div>`;\n    const exercises = await exerciseService.getExercisesWithParams(queryParams);\n    queryParams.maxPage = exercises.totalPages; // зберігаємо номер останньої сторінки в пагінації\n\n    if (exercises.results.length === 0) {\n      refs.exercises.innerHTML = `<p class=\"exercise-title-text\">${notFoundText}</p>`;\n      return;\n    }\n    refs.exercises.innerHTML = exerciseCreateMarkup(exercises.results);\n\n    // якщо за перший запит ми отримали всі обʼєкти колекції - не показуємо пагінацію\n    if (queryParams.maxPage === 1) {\n      return;\n    }\n\n    //пагінація\n    renderPagination(\n      refs.exercisePageWrapper,\n      queryParams.page,\n      queryParams.maxPage,\n      handlePageClick\n    );\n  } catch (err) {\n    // refs.loader.classList.remove(ACTIVE_CLASS);\n    showErrorToast('Failed to load exercises. Please try again later.');\n  }\n}\n\nexport { handleSearch, handlePageClick, handleCategoryClick };\n","import { showErrorToast } from '../utils/utils.js';\nimport { renderPagination } from '../template/paginationMarkup.js';\nimport { refs } from '../utils/refs.js';\nimport { filtersService } from '../services/services.js';\n\nasync function loadCategories(page = 1) {\n  refs.categories.innerHTML = `<div class=\"loader categories-loader\"></div>`;\n\n  const filterRequest = filtersService.getFilterQuery();\n  const limit = window.innerWidth < 768 ? 9 : 12;\n\n  try {\n    const filteredCategories = await filtersService.fetchFilteredData(\n      filterRequest,\n      limit,\n      page\n    );\n\n    const sortedResults = filteredCategories.results.sort((a, b) =>\n      a.name.localeCompare(b.name)\n    );\n\n    refs.categories.innerHTML = '';\n    sortedResults.forEach(category => {\n      const categoryCard = document.createElement('div');\n      categoryCard.className = 'category-card';\n\n      categoryCard.innerHTML = `\n        <img\n          src=\"${category.imgURL}\"\n          srcset=\"${category.imgURL} 1x, ${category.imgURL} 2x\"\n          alt=\"${category.name} exercise\"\n        />\n        <div class=\"category-name\">${\n          category.name.charAt(0).toUpperCase() + category.name.slice(1)\n        }</div>\n        <div class=\"category-type\">${category.filter}</div>\n      `;\n\n      refs.categories.appendChild(categoryCard);\n    });\n\n    refs.categoriesWrap.innerHTML = '';\n    if (filteredCategories.totalPages > 1) {\n      renderPagination(\n        refs.categoriesWrap,\n        page,\n        filteredCategories.totalPages,\n        handleCardPageClick\n      );\n    }\n  } catch (error) {\n    showErrorToast(\n      'Failed to load exercise categories. Please try again later.'\n    );\n  }\n}\n\nfunction handleCardPageClick(event) {\n  const page = Number(event.target.textContent);\n  loadCategories(page);\n}\n\n// loadCategories();\nexport { loadCategories };\n","import { refs } from '../utils/refs.js';\nimport { filtersService } from '../services/services.js';\nimport {loadCategories} from \"./card-category.js\";\n\nfunction onFilterBtnClick(event) {\n    refs.filterBtns.forEach(btn => {\n      btn.classList.remove('active-filter-btn');\n    });\n\n    if (event.target.nodeName !== 'BUTTON') {\n      return;\n    }\n\n    event.target.classList.add('active-filter-btn');\n\n    refs.searchForm.classList.remove('active-search-form');\n    refs.cardContainer.classList.remove('hidden');\n    refs.exerciseContainer.classList.add('hidden');\n    refs.exercisesHeader.innerHTML = 'Exercises';\n\n  filtersService.setFilterQuery(event.target.textContent.trim());\n  loadCategories();\n}\n\nexport { onFilterBtnClick };","import { refs } from '../utils/refs.js';\nimport { subscriptionsService } from '../services/services.js';\n\nasync function handleSubscription(event) {\n  event.preventDefault();\n  // collect form data\n\n  subscriptionsService.getFormData();\n  // validate entered email\n  if (subscriptionsService.verifyData()) {\n    // post email\n    subscriptionsService.postEmail();\n  }\n}\n\nfunction setFooterYear() {\n  const year = new Date().getFullYear();\n  refs.footerYear.textContent = `@${year}`;\n}\n\nexport { handleSubscription, setFooterYear };\n","import { refs } from '../utils/refs';\n\nfunction scrollUp() {\n  window.addEventListener('scroll', () => {\n    if (window.scrollY > 350) {\n      refs.scrollUp.style.display = 'block';\n    } else {\n      refs.scrollUp.style.display = 'none';\n    }\n  });\n\n  refs.scrollUp.addEventListener('click', () => {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  });\n}\n\nexport { scrollUp };\n","import './js/partials_js/header';\nimport { refs } from './js/utils/refs';\nimport {\n  handleSearch,\n  handleCategoryClick,\n} from './js/handlers/exercise_handlers';\n\nimport { handleRenderQuote } from './js/partials_js/quote';\nimport { onFilterBtnClick } from './js/partials_js/filter';\nimport {\n  handleSubscription,\n  setFooterYear,\n} from './js/partials_js/subscription';\nimport { loadCategories } from './js/partials_js/card-category';\nimport {\n  setupModalsListeners,\n  setupOpenExerciseModalLister,\n  setupGiveRatingListener,\n} from './js/listeners/modals-listeners';\nimport { scrollUp } from './js/partials_js/scroll-up';\n\nloadCategories();\nif (!window.quoteRendered) {\n  handleRenderQuote();\n  window.quoteRendered = true;\n}\n\nrefs.searchForm.addEventListener('submit', handleSearch);\nrefs.filterBtnsList.addEventListener('click', onFilterBtnClick);\nrefs.footerForm.addEventListener('submit', handleSubscription);\nrefs.categories.addEventListener('click', handleCategoryClick);\n\nsetFooterYear();\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setupModalsListeners();\n  setupOpenExerciseModalLister();\n  setupGiveRatingListener();\n});\nscrollUp();\n// Close modals on ESC\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    if (refs.exerciseModal.classList.contains('is-open')) {\n      refs.exerciseModal.classList.remove('is-open');\n    }\n\n    if (refs.giveRatingModal.classList.contains('is-open')) {\n      refs.giveRatingModal.classList.remove('is-open');\n      refs.exerciseModal.classList.add('is-open');\n    }\n  }\n});\n"],"names":["renderPagination","paginationWrapper","currentPage","totalPages","clickHandler","maxPrev","maxNext","createPageButton","page","btn","startPage","endPage","i","handlePageClick","event","queryParams","refs","exercises","exerciseService","exerciseCreateMarkup","showErrorToast","handleSearch","form","userQuery","notFoundText","handleCategoryClick","category","loadCategories","filterRequest","filtersService","limit","filteredCategories","sortedResults","a","b","categoryCard","handleCardPageClick","onFilterBtnClick","handleSubscription","subscriptionsService","setFooterYear","year","scrollUp","handleRenderQuote","setupModalsListeners","setupOpenExerciseModalLister","setupGiveRatingListener"],"mappings":"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"}