{"version":3,"file":"favorite.js","sources":["../src/js/partials_js/favorites.js"],"sourcesContent":["import { handleRenderQuote } from './quote.js';\n \ndocument.addEventListener('DOMContentLoaded', () => {\n    handleRenderQuote();\n});\n\n\n\nimport { ExerciseService } from '../services/exercises.js';\nimport { exerciseCreateMarkup } from '../template/exercisesMarkup.js';\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    const exerciseList = document.querySelector('.exercise-list');\n    const exerciseContainer = document.querySelector('.exercise-container');\n    const notFoundContainer = document.querySelector('.favorite_not_found_containers');\n    const paginationWrapper = document.querySelector('.exercise-page-wrapper');\n    \n    // Ініціалізуємо сервіс\n    const exerciseService = new ExerciseService();\n    \n    // Отримуємо ID вправ з localStorage\n    const favoriteExerciseIds = JSON.parse(localStorage.getItem('favorites')) || [];\n    \n    // Показуємо контейнер (прибираємо клас hidden)\n    exerciseContainer.classList.remove('hidden');\n    \n    if (favoriteExerciseIds.length > 0) {\n        loadAndDisplayExercises();\n    } else {\n        showNoExercisesMessage();\n    }\n    \n    function loadAndDisplayExercises() {\n        // Ховаємо повідомлення про відсутність вправ\n        notFoundContainer.style.display = 'none';\n        \n        // Показуємо індикатор завантаження\n        exerciseList.innerHTML = '<li class=\"loading-msg\">Loading your favorite exercises...</li>';\n        \n        // Отримуємо повні дані про вправи\n        const exercisesPromises = favoriteExerciseIds.map(function(id) {\n            return exerciseService.getExerciseById(id).catch(function(error) {\n                console.error('Error loading exercise ' + id + ':', error);\n                return null;\n            });\n        });\n        \n        Promise.all(exercisesPromises)\n            .then(function(exercises) {\n                const validExercises = exercises.filter(function(ex) {\n                    return ex !== null;\n                });\n                \n                if (validExercises.length > 0) {\n                    displayExercises(validExercises);\n                } else {\n                    showNoExercisesMessage();\n                }\n            })\n            .catch(function(error) {\n                console.error('Error loading favorites:', error);\n                showLoadError();\n            });\n    }\n    \n    function displayExercises(exercises) {\n        // Ховаємо повідомлення про відсутність вправ\n        notFoundContainer.style.display = 'none';\n        \n        // Відображаємо список вправ\n        exerciseList.innerHTML = exerciseCreateMarkup(exercises);\n        \n        // Тут можна додати логіку пагінації, якщо потрібно\n        paginationWrapper.innerHTML = ''; // Очищаємо пагінацію\n    }\n    \n    function showNoExercisesMessage() {\n        // Показуємо повідомлення про відсутність вправ\n        notFoundContainer.style.display = 'block';\n        \n        // Очищаємо список вправ і пагінацію\n        exerciseList.innerHTML = '';\n        paginationWrapper.innerHTML = '';\n    }\n    \n    function showLoadError() {\n        // Ховаємо повідомлення про відсутність вправ\n        notFoundContainer.style.display = 'none';\n        \n        // Показуємо повідомлення про помилку\n        exerciseList.innerHTML = '<li class=\"error-msg\">Failed to load favorites. Please try again.</li>';\n        paginationWrapper.innerHTML = '';\n    }\n});\n\n\n\n\n\n\n// import { ExerciseService } from '../services/exercises.js';\n// import { exerciseCreateMarkup } from '../template/exercisesMarkup.js';\n\n// document.addEventListener('DOMContentLoaded', function() {\n//     const exerciseList = document.querySelector('.exercise-list');\n//     const exerciseContainer = document.querySelector('.exercise-container');\n//     const notFoundMessage = document.querySelector('.favorite_not_found');\n    \n//     // Ініціалізуємо сервіс\n//     const exerciseService = new ExerciseService();\n    \n//     // Отримуємо ID вправ з localStorage\n//     const favoriteExerciseIds = JSON.parse(localStorage.getItem('favorites')) || [];\n    \n//     // Показуємо контейнер\n//     exerciseContainer.classList.remove('hidden');\n    \n//     if (favoriteExerciseIds.length > 0) {\n//         loadAndDisplayExercises();\n//     } else {\n//         showNoExercisesMessage();\n//     }\n    \n//     function loadAndDisplayExercises() {\n//         // Додаємо індикатор завантаження\n//         exerciseList.innerHTML = '<li class=\"loading-msg\">Loading your favorite exercises...</li>';\n        \n//         // Отримуємо повні дані про вправи\n//         const exercisesPromises = favoriteExerciseIds.map(function(id) {\n//             return exerciseService.getExerciseById(id).catch(handleExerciseLoadError);\n//         });\n        \n//         Promise.all(exercisesPromises)\n//             .then(filterValidExercises)\n//             .then(displayExercises)\n//             .catch(handleLoadError);\n//     }\n    \n//     function handleExerciseLoadError(e) {\n//         console.error('Error loading exercise:', e);\n//         return null;\n//     }\n    \n//     function filterValidExercises(exercises) {\n//         return exercises.filter(function(ex) {\n//             return ex !== null;\n//         });\n//     }\n    \n//     function displayExercises(validExercises) {\n//         if (validExercises.length > 0) {\n//             exerciseList.innerHTML = exerciseCreateMarkup(validExercises);\n//             if (notFoundMessage) notFoundMessage.style.display = 'none';\n//         } else {\n//             showNoExercisesMessage();\n//         }\n//     }\n    \n//     function handleLoadError(error) {\n//         console.error('Error loading favorites:', error);\n//         exerciseList.innerHTML = '<li class=\"error-msg\">Failed to load favorites. Please try again.</li>';\n//         if (notFoundMessage) notFoundMessage.style.display = 'none';\n//     }\n    \n//     function showNoExercisesMessage() {\n//         exerciseList.innerHTML = '';\n//         if (notFoundMessage) notFoundMessage.style.display = 'block';\n//     }\n// });\n"],"names":["handleRenderQuote","exerciseList","exerciseContainer","notFoundContainer","paginationWrapper","exerciseService","ExerciseService","favoriteExerciseIds","loadAndDisplayExercises","showNoExercisesMessage","exercisesPromises","id","error","exercises","validExercises","ex","displayExercises","showLoadError","exerciseCreateMarkup"],"mappings":"iGAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAChDA,GACJ,CAAC,EAOD,SAAS,iBAAiB,mBAAoB,UAAW,CACrD,MAAMC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAoB,SAAS,cAAc,qBAAqB,EAChEC,EAAoB,SAAS,cAAc,gCAAgC,EAC3EC,EAAoB,SAAS,cAAc,wBAAwB,EAGnEC,EAAkB,IAAIC,EAGtBC,EAAsB,KAAK,MAAM,aAAa,QAAQ,WAAW,CAAC,GAAK,GAG7EL,EAAkB,UAAU,OAAO,QAAQ,EAEvCK,EAAoB,OAAS,EAC7BC,IAEAC,IAGJ,SAASD,GAA0B,CAE/BL,EAAkB,MAAM,QAAU,OAGlCF,EAAa,UAAY,kEAGzB,MAAMS,EAAoBH,EAAoB,IAAI,SAASI,EAAI,CAC3D,OAAON,EAAgB,gBAAgBM,CAAE,EAAE,MAAM,SAASC,EAAO,CAC7D,eAAQ,MAAM,0BAA4BD,EAAK,IAAKC,CAAK,EAClD,IACvB,CAAa,CACb,CAAS,EAED,QAAQ,IAAIF,CAAiB,EACxB,KAAK,SAASG,EAAW,CACtB,MAAMC,EAAiBD,EAAU,OAAO,SAASE,EAAI,CACjD,OAAOA,IAAO,IAClC,CAAiB,EAEGD,EAAe,OAAS,EACxBE,EAAiBF,CAAc,EAE/BL,GAEpB,CAAa,EACA,MAAM,SAASG,EAAO,CACnB,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CK,GAChB,CAAa,CACR,CAED,SAASD,EAAiBH,EAAW,CAEjCV,EAAkB,MAAM,QAAU,OAGlCF,EAAa,UAAYiB,EAAqBL,CAAS,EAGvDT,EAAkB,UAAY,EACjC,CAED,SAASK,GAAyB,CAE9BN,EAAkB,MAAM,QAAU,QAGlCF,EAAa,UAAY,GACzBG,EAAkB,UAAY,EACjC,CAED,SAASa,GAAgB,CAErBd,EAAkB,MAAM,QAAU,OAGlCF,EAAa,UAAY,yEACzBG,EAAkB,UAAY,EACjC,CACL,CAAC"}